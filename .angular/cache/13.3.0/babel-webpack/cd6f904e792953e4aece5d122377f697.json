{"ast":null,"code":"var PrioritiesComponent_1;\nimport { __decorate } from \"tslib\";\nimport { Component, EventEmitter, Input, Output } from '@angular/core';\nimport { Priority } from '../../model/Priority';\nimport { EditCategoryDialogComponent } from '../../dialog/edit-category-dialog/edit-category-dialog.component';\nimport { ConfirmDialogComponent } from '../../dialog/confirm-dialog/confirm-dialog.component';\nimport { EditPriorityDialogComponent } from \"../../dialog/edit-priority-dialog/edit-priority-dialog.component\";\nimport { OperType } from \"../../dialog/OperType\";\nlet PrioritiesComponent = PrioritiesComponent_1 = class PrioritiesComponent {\n  // -------------------------------------------------------------------------\n  constructor(dialog // для открытия нового диалогового окна (из текущего))\n  ) {\n    this.dialog = dialog; // удалили\n\n    this.deletePriority = new EventEmitter(); // изменили\n\n    this.updatePriority = new EventEmitter(); // добавили\n\n    this.addPriority = new EventEmitter();\n  }\n\n  ngOnInit() {}\n\n  delete(priority) {\n    const dialogRef = this.dialog.open(ConfirmDialogComponent, {\n      maxWidth: '500px',\n      data: {\n        dialogTitle: 'Подтвердите действие',\n        message: `Вы действительно хотите удалить категорию: \"${priority.title}\"? (задачам проставится значение 'Без приоритета')`\n      },\n      autoFocus: false\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        this.deletePriority.emit(priority);\n      }\n    });\n  }\n\n  onAddPriority() {\n    const dialogRef = this.dialog.open(EditCategoryDialogComponent, {\n      data: ['', 'Добавление приоритета', OperType.ADD],\n      width: '400px'\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result) {\n        const newPriority = new Priority(null, result, PrioritiesComponent_1.defaultColor);\n        this.addPriority.emit(newPriority);\n      }\n    });\n  }\n\n  onEditPriority(priority) {\n    const dialogRef = this.dialog.open(EditPriorityDialogComponent, {\n      data: [priority.title, 'Редактирование приоритета', OperType.EDIT]\n    });\n    dialogRef.afterClosed().subscribe(result => {\n      if (result === 'delete') {\n        this.deletePriority.emit(priority);\n        return;\n      }\n\n      if (result) {\n        priority.title = result;\n        this.updatePriority.emit(priority);\n        return;\n      }\n    });\n  }\n\n};\nPrioritiesComponent.defaultColor = '#fff';\n\n__decorate([Output()], PrioritiesComponent.prototype, \"deletePriority\", void 0);\n\n__decorate([Output()], PrioritiesComponent.prototype, \"updatePriority\", void 0);\n\n__decorate([Output()], PrioritiesComponent.prototype, \"addPriority\", void 0);\n\n__decorate([Input()], PrioritiesComponent.prototype, \"priorities\", void 0);\n\nPrioritiesComponent = PrioritiesComponent_1 = __decorate([Component({\n  selector: 'app-priorities',\n  templateUrl: './priorities.component.html',\n  styleUrls: ['./priorities.component.css']\n})], PrioritiesComponent);\nexport { PrioritiesComponent };","map":null,"metadata":{},"sourceType":"module"}